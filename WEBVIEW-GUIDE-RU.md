# Руководство по использованию WebView

## Что реализовано

Добавлена новая функциональность открытия URL в собственном окне приложения с использованием WebView2.

## Основные возможности

### Параметры команды openWebView

```json
{
  "type": "openWebView",
  "parameters": {
    "url": "https://example.com",  // Обязательно: какой сайт открыть
    "top": true,                     // Необязательно: поверх всех окон
    "w": 840,                        // Необязательно: ширина окна (0 = полный экран)
    "h": 480                         // Необязательно: высота окна (0 = полный экран)
  }
}
```

### Примеры

#### 1. YouTube в окне 840x480 поверх всех окон
```json
{
  "type": "openWebView",
  "parameters": {
    "url": "https://www.youtube.com",
    "top": true,
    "w": 840,
    "h": 480
  }
}
```

#### 2. Полноэкранное открытие
```json
{
  "type": "openWebView",
  "parameters": {
    "url": "https://example.com"
  }
}
```

или

```json
{
  "type": "openWebView",
  "parameters": {
    "url": "https://example.com",
    "w": 0,
    "h": 0
  }
}
```

## Созданный модуль

В папке `Modules/youtube.webview-1.0.0/manifest.json` создан пример модуля с двумя командами:

### Команда 1: Открыть YouTube в окне
- **Фразы**: "открой ютуб в окне", "включи ютуб в окне"
- **Действие**: Открывает YouTube в окне 840x480 поверх всех окон

### Команда 2: Закрыть YouTube в окне
- **Фразы**: "закрой ютуб в окне", "выключи ютуб в окне"
- **Действие**: Закрывает последнее открытое окно YouTube WebView

## Закрытие окон WebView

### Закрыть последнее открытое окно
```json
{
  "type": "stopProcess",
  "parameters": {
    "commandId": "ваш_command_id"
  }
}
```

### Закрыть все окна команды
```json
{
  "type": "stopAllProcesses",
  "parameters": {
    "commandId": "ваш_command_id",
    "moduleId": "ваш.module.id"
  }
}
```

### Закрыть все окна системы
```json
{
  "type": "stopAllProcesses",
  "parameters": {}
}
```

## Элементы управления окном

Окно WebView имеет свою панель управления:
- **←** (Назад) - вернуться на предыдущую страницу
- **→** (Вперед) - перейти на следующую страницу
- **↻** (Обновить) - перезагрузить страницу
- **✕** (Закрыть) - закрыть окно

### Дополнительные возможности
- Перетаскивание окна за заголовок
- Двойной клик по заголовку - развернуть/свернуть окно
- Изменение размера окна (если не в полноэкранном режиме)

## Отличия от openUrl

| Функция | openUrl | openWebView |
|---------|---------|-------------|
| Где открывается | Браузер по умолчанию | Окно приложения |
| Контроль окна | Нет | Да (размер, поверх всех) |
| Отслеживание | Нет | Да |
| Голосовое закрытие | Нет | Да |
| Элементы управления | Браузера | Свои в заголовке |
| Полный экран | Зависит от браузера | Встроенная поддержка |

## Требования

### WebView2 Runtime
Для работы требуется Microsoft Edge WebView2 Runtime:
- Обычно уже установлен в Windows 10/11
- Скачать: https://developer.microsoft.com/microsoft-edge/webview2/

Если не установлен, приложение покажет сообщение об ошибке.

## Примеры использования

1. **YouTube в маленьком окне**: окно 840x480 поверх всех окон
2. **Браузер документации**: полноэкранный WebView для чтения
3. **Веб-инструменты**: открытие веб-инструментов в отдельных окнах
4. **Медиаплееры**: веб-плееры в окнах нужного размера
5. **Панели мониторинга**: всегда видимые панели

## Тестирование

1. Запустите приложение
2. Скажите: "открой ютуб в окне"
3. Проверьте, что окно открылось размером 840x480 и поверх всех окон
4. Протестируйте кнопки навигации (назад, вперед, обновить)
5. Скажите: "закрой ютуб в окне"
6. Проверьте, что окно закрылось

## Решение проблем

### WebView2 не загружается
- Убедитесь, что WebView2 Runtime установлен
- Проверьте брандмауэр/антивирус
- Проверьте подключение к интернету

### Окно не остается поверх
- Проверьте, что параметр `top` установлен в `true`
- Убедитесь, что нет других окон "поверх всех"

---

**Дата реализации**: 09.11.2025
**Версия**: 1.0.0
